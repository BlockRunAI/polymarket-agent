<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymarket AI Agent by BlockRun.AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-base: #05070a;
            --bg-surface: #0c0f14;
            --bg-elevated: #12161d;
            --bg-hover: #1a1f29;
            --border-subtle: rgba(255, 255, 255, 0.12);
            --border-default: rgba(255, 255, 255, 0.18);
            --border-glow: rgba(0, 240, 255, 0.25);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.65);
            --text-tertiary: rgba(255, 255, 255, 0.35);
            --accent-cyan: #00f0ff;
            --accent-green: #00ff88;
            --accent-purple: #a855f7;
            --accent-pink: #ff00aa;
            --accent-orange: #ff8800;
            --accent-red: #ff3366;
            --gradient-main: linear-gradient(135deg, #00f0ff 0%, #00ff88 50%, #a855f7 100%);
            --gradient-glow: linear-gradient(135deg, rgba(0, 240, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 50%, rgba(168, 85, 247, 0.15) 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-base);
            color: var(--text-primary);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        /* Animated Background */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(0, 240, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 240, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .bg-glow {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 20%, rgba(0, 240, 255, 0.08) 0%, transparent 40%),
                        radial-gradient(circle at 70% 60%, rgba(168, 85, 247, 0.06) 0%, transparent 40%),
                        radial-gradient(circle at 50% 80%, rgba(0, 255, 136, 0.05) 0%, transparent 30%);
            pointer-events: none;
            z-index: 0;
            animation: bgPulse 15s ease-in-out infinite;
        }

        @keyframes bgPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        /* Header */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(5, 7, 10, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-subtle);
            padding: 0 24px;
            height: 70px;
            display: flex;
            align-items: center;
        }

        .header-inner {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .logo-mark {
            width: 42px;
            height: 42px;
            background: var(--gradient-main);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 14px;
            color: #000;
            box-shadow: 0 0 30px rgba(0, 240, 255, 0.4), 0 0 60px rgba(0, 255, 136, 0.2);
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { box-shadow: 0 0 30px rgba(0, 240, 255, 0.4), 0 0 60px rgba(0, 255, 136, 0.2); }
            50% { box-shadow: 0 0 40px rgba(0, 240, 255, 0.6), 0 0 80px rgba(0, 255, 136, 0.3); }
        }

        .logo-text { display: flex; flex-direction: column; }

        .logo-title {
            font-size: 18px;
            font-weight: 700;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-subtitle {
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .header-nav {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            padding: 8px 16px;
            border-radius: 8px;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--bg-elevated);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .powered-badge {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .powered-badge a {
            color: var(--accent-cyan);
            text-decoration: none;
            font-weight: 600;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 100px;
            font-size: 12px;
            font-weight: 700;
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--accent-green);
            animation: livePulse 1.5s ease-in-out infinite;
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        /* Main */
        main {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 32px 24px;
        }

        /* Hero Stats */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .hero-stat {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .hero-stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-main);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .hero-stat:hover {
            transform: translateY(-4px);
            border-color: var(--border-default);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .hero-stat:hover::before { opacity: 1; }

        .hero-stat.featured {
            background: var(--gradient-glow);
            border-color: rgba(0, 240, 255, 0.2);
        }

        .hero-stat-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .hero-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 36px;
            font-weight: 600;
            line-height: 1;
        }

        .hero-stat-value.cyan { color: var(--accent-cyan); text-shadow: 0 0 30px rgba(0, 240, 255, 0.5); }
        .hero-stat-value.green { color: var(--accent-green); text-shadow: 0 0 30px rgba(0, 255, 136, 0.5); }
        .hero-stat-value.purple { color: var(--accent-purple); text-shadow: 0 0 30px rgba(168, 85, 247, 0.5); }
        .hero-stat-value.red { color: var(--accent-red); }
        .hero-stat-value.small { font-size: 20px; }

        .hero-stat-meta {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-top: 12px;
        }

        /* Cards */
        .card {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 36px;
            height: 36px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-default);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--accent-cyan);
        }

        .card-icon svg {
            stroke: var(--accent-cyan);
        }

        .card-body { padding: 24px; }

        /* Status Badge */
        .status-badge {
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.success {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-green);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .status-badge.error {
            background: rgba(255, 51, 102, 0.15);
            color: var(--accent-red);
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .btn:disabled { opacity: 0.4; cursor: not-allowed; }

        .btn-primary {
            background: var(--gradient-main);
            color: #000;
            box-shadow: 0 4px 20px rgba(0, 240, 255, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 240, 255, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
            color: #000;
            box-shadow: 0 4px 20px rgba(0, 255, 136, 0.3);
        }

        .btn-success:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 255, 136, 0.5);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff3366 0%, #cc2952 100%);
            color: #fff;
        }

        .btn-secondary {
            background: var(--bg-elevated);
            color: var(--text-primary);
            border: 1px solid var(--border-default);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--bg-hover);
            border-color: var(--accent-cyan);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 10px 14px;
        }

        .btn-ghost:hover:not(:disabled) {
            color: var(--accent-cyan);
            background: var(--bg-elevated);
        }

        /* Grid */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        /* Decision List */
        .decision-list {
            max-height: 450px;
            overflow-y: auto;
        }

        .decision-item {
            padding: 20px;
            border-bottom: 1px solid var(--border-subtle);
            transition: background 0.2s;
        }

        .decision-item:last-child { border-bottom: none; }
        .decision-item:hover { background: var(--bg-elevated); }

        .decision-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 12px;
        }

        .decision-market {
            font-size: 14px;
            font-weight: 600;
            flex: 1;
            line-height: 1.4;
        }

        .decision-action {
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .decision-action.buy {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-green);
        }

        .decision-action.pass {
            background: var(--bg-elevated);
            color: var(--text-tertiary);
        }

        .decision-metrics {
            display: flex;
            gap: 24px;
            margin-bottom: 12px;
        }

        .metric { display: flex; flex-direction: column; gap: 4px; }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            font-weight: 600;
        }

        .metric-value.positive { color: var(--accent-green); }
        .metric-value.negative { color: var(--accent-red); }
        .metric-value.neutral { color: var(--accent-cyan); }

        .metric-label {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .trade-result {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .trade-result.success { background: rgba(0, 255, 136, 0.15); color: var(--accent-green); }
        .trade-result.skipped { background: var(--bg-elevated); color: var(--text-tertiary); }
        .trade-result.error { background: rgba(255, 51, 102, 0.15); color: var(--accent-red); }
        .trade-result.pending { background: rgba(255, 136, 0, 0.15); color: var(--accent-orange); }

        .decision-reasoning {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .decision-time {
            font-size: 11px;
            color: var(--text-tertiary);
        }

        /* Markets Section */
        .markets-section {
            margin-top: 32px;
        }

        .markets-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .markets-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .markets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 16px;
        }

        .market-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 14px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .market-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-main);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .market-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-default);
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);
        }

        .market-card:hover::after { transform: scaleX(1); }

        .market-question {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .market-odds {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .odds-box {
            flex: 1;
            text-align: center;
            padding: 14px;
            background: var(--bg-elevated);
            border-radius: 10px;
            border: 1px solid var(--border-default);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .odds-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 24px;
            font-weight: 700;
        }

        .odds-value.yes { color: var(--accent-green); }
        .odds-value.no { color: var(--accent-red); }

        .odds-label {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 4px;
        }

        .market-meta {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-tertiary);
        }

        /* Logs */
        .logs-container {
            background: var(--bg-base);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 16px;
            max-height: 250px;
            overflow-y: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.8;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .log-line { color: var(--text-tertiary); }
        .log-line.error { color: var(--accent-red); }
        .log-line.warning { color: var(--accent-orange); }
        .log-line.info { color: var(--accent-cyan); }

        /* Empty State */
        .empty-state {
            padding: 48px 24px;
            text-align: center;
            color: var(--text-tertiary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.4;
            display: flex;
            justify-content: center;
        }

        .empty-state-icon svg {
            stroke: var(--text-tertiary);
        }

        /* Footer */
        footer {
            position: relative;
            z-index: 1;
            border-top: 1px solid var(--border-subtle);
            padding: 32px 24px;
            text-align: center;
            color: var(--text-tertiary);
            font-size: 13px;
        }

        footer a {
            color: var(--accent-cyan);
            text-decoration: none;
        }

        /* Alert */
        .alert {
            padding: 16px 20px;
            border-radius: 12px;
            margin-top: 16px;
            font-size: 13px;
            display: none;
        }

        .alert.error {
            background: rgba(255, 51, 102, 0.1);
            border: 1px solid rgba(255, 51, 102, 0.2);
            color: var(--accent-red);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-default); border-radius: 3px; }

        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 700;
        }

        .section-badge {
            padding: 6px 14px;
            background: var(--gradient-glow);
            border: 1px solid rgba(0, 240, 255, 0.3);
            border-radius: 100px;
            font-size: 11px;
            font-weight: 600;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.15);
        }

        /* Agent Swarm Section */
        .agents-section {
            margin-top: 48px;
            padding: 32px;
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .agents-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .agent-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .agent-card.active {
            border-color: var(--accent-green);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.15);
        }

        .agent-card.coming-soon {
            opacity: 0.6;
        }

        .agent-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-cyan);
        }

        .agent-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .agent-icon {
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .agent-status {
            padding: 4px 10px;
            border-radius: 100px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-green);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .status-soon {
            background: rgba(168, 85, 247, 0.15);
            color: var(--accent-purple);
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

        .agent-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .agent-desc {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .agent-stats {
            display: flex;
            gap: 16px;
        }

        .agent-stat {
            display: flex;
            flex-direction: column;
        }

        .agent-stat .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .agent-stat .stat-label {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
        }

        .agent-placeholder {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .placeholder-bar {
            height: 8px;
            background: var(--bg-hover);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .placeholder-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 2s infinite;
        }

        .placeholder-bar.short { width: 60%; }

        @keyframes shimmer {
            100% { left: 100%; }
        }

        /* LLM Evaluation Section */
        .evaluation-section {
            margin-top: 48px;
            padding: 32px;
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .evaluation-panel {
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            padding: 24px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .eval-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .eval-description strong {
            color: var(--accent-cyan);
        }

        .models-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .model-card {
            background: var(--bg-base);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .model-card:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
        }

        .model-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .model-logo {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 14px;
        }

        .model-logo.openai {
            background: linear-gradient(135deg, #10a37f, #0d8c6d);
            color: white;
        }

        .model-logo.google {
            background: linear-gradient(135deg, #4285f4, #34a853);
            color: white;
        }

        .model-logo.anthropic {
            background: linear-gradient(135deg, #d4a574, #cc785c);
            color: white;
        }

        .model-name {
            font-size: 14px;
            font-weight: 600;
        }

        .model-provider {
            font-size: 11px;
            color: var(--text-tertiary);
        }

        .model-vote {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            min-height: 24px;
        }

        .vote-label { color: var(--text-tertiary); }
        .vote-yes { color: var(--accent-green); }
        .vote-no { color: var(--accent-red); }

        .model-bar {
            height: 8px;
            background: var(--bg-hover);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .model-bar-fill {
            height: 100%;
            background: var(--gradient-main);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .model-role {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .consensus-result {
            background: var(--bg-base);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .consensus-label {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .consensus-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .consensus-value.bullish { color: var(--accent-green); }
        .consensus-value.bearish { color: var(--accent-red); }
        .consensus-value.mixed { color: var(--accent-orange); }

        /* Roadmap Section */
        .roadmap-section {
            margin-top: 48px;
            padding: 32px;
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .roadmap-content {
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            border-radius: 16px;
            padding: 24px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .roadmap-intro {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 28px;
        }

        .roadmap-intro strong {
            color: var(--accent-purple);
        }

        .roadmap-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .roadmap-item {
            background: var(--bg-base);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .roadmap-item:hover {
            transform: translateY(-2px);
            border-color: var(--accent-purple);
        }

        .roadmap-item.completed {
            border-color: rgba(0, 255, 136, 0.3);
        }

        .roadmap-item.in-progress {
            border-color: rgba(0, 240, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.1);
        }

        .roadmap-item.future {
            opacity: 0.7;
        }

        .roadmap-icon {
            font-size: 24px;
            margin-bottom: 12px;
            display: flex;
        }

        .roadmap-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .roadmap-desc {
            font-size: 12px;
            color: var(--text-tertiary);
            line-height: 1.5;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero-stats { grid-template-columns: repeat(2, 1fr); }
            .agents-grid { grid-template-columns: repeat(2, 1fr); }
            .models-grid { grid-template-columns: 1fr; }
            .roadmap-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            .hero-stats, .grid-2 { grid-template-columns: 1fr; }
            .markets-grid { grid-template-columns: 1fr; }
            .agents-grid { grid-template-columns: 1fr; }
            .roadmap-grid { grid-template-columns: 1fr; }
            .header-nav { display: none; }
            .hero-stat-value { font-size: 28px; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <header>
        <div class="header-inner">
            <div class="logo">
                <div class="logo-mark">AI</div>
                <div class="logo-text">
                    <div class="logo-title">Polymarket AI Agent</div>
                    <div class="logo-subtitle">by BlockRun.AI</div>
                </div>
            </div>
            <nav class="header-nav">
                <a href="https://github.com/BlockRunAI/polymarket-agent" target="_blank" class="nav-link">GitHub</a>
                <a href="/setup" class="nav-link">Setup Guide</a>
            </nav>
            <div class="header-actions">
                <div class="powered-badge">Powered by <a href="https://blockrun.ai" target="_blank">BlockRun.AI</a></div>
                <div class="live-indicator">
                    <span class="live-dot"></span>
                    LIVE
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Stats -->
        <section class="hero-stats">
            <div class="hero-stat featured">
                <div class="hero-stat-label">USDC Balance</div>
                <div id="usdc-balance" class="hero-stat-value cyan">$0.00</div>
                <div id="wallet-address" class="hero-stat-meta">Loading wallet...</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-label">Agent Status</div>
                <div id="agent-status-text" class="hero-stat-value small">Stopped</div>
                <div id="last-run" class="hero-stat-meta">Last run: Never</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-label">Analysis Cycles</div>
                <div id="cycles" class="hero-stat-value purple">0</div>
                <div id="decisions-count" class="hero-stat-meta">0 decisions made</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-label">Auto-Trade</div>
                <div id="auto-trade-status" class="hero-stat-value red">OFF</div>
                <div class="hero-stat-meta">AI-controlled execution</div>
            </div>
        </section>

        <!-- Agent Control -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <div class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
                    Agent Control
                </div>
                <span id="agent-status" class="status-badge error">STOPPED</span>
            </div>
            <div class="card-body">
                <div class="btn-group">
                    <button id="btn-start" class="btn btn-success" onclick="startAgent()">Start Agent</button>
                    <button id="btn-stop" class="btn btn-danger" onclick="stopAgent()" disabled>Stop Agent</button>
                    <button id="btn-run" class="btn btn-secondary" onclick="runOnce()">Run Once</button>
                    <button id="btn-auto-trade" class="btn btn-primary" onclick="toggleAutoTrade()">Enable Auto-Trade</button>
                </div>
                <div id="error-msg" class="alert error"></div>
            </div>
        </div>

        <!-- Server Logs -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <div class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg></div>
                    Server Logs
                </div>
                <button class="btn btn-ghost" onclick="clearLogs()">Clear</button>
            </div>
            <div class="card-body">
                <div id="logs-content" class="logs-container">
                    <div class="log-line">Initializing...</div>
                </div>
            </div>
        </div>

        <!-- Decisions and Trades -->
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a4 4 0 0 1 4 4v2a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4z"/><path d="M16 14a4 4 0 0 0-8 0v6h8v-6z"/><circle cx="12" cy="6" r="1.5"/></svg></div>
                        AI Decisions
                    </div>
                </div>
                <div id="decisions-list" class="decision-list">
                    <div class="empty-state">
                        <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></div>
                        <div>No decisions yet. Click "Run Once" to analyze markets.</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg></div>
                        Positions & Orders
                    </div>
                    <button class="btn btn-ghost" onclick="refreshPositions()">Refresh</button>
                </div>
                <div id="trades-list" class="decision-list">
                    <div class="empty-state">
                        <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4"><circle cx="12" cy="12" r="10"/><path d="M12 6v12"/><path d="M15 9.5a3 3 0 0 0-3-3h-1a3 3 0 0 0 0 6h2a3 3 0 0 1 0 6h-1a3 3 0 0 1-3-3"/></svg></div>
                        <div>Loading positions...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Active Markets -->
        <section class="markets-section">
            <div class="markets-header">
                <div class="markets-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-cyan)" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    Active Markets
                </div>
            </div>
            <div class="markets-grid" id="markets-grid">
                {% for market in markets %}
                <div class="market-card">
                    <div class="market-question">{{ market.question }}</div>
                    <div class="market-odds">
                        <div class="odds-box">
                            <div class="odds-value yes">{{ "%.0f"|format((market.yes_odds|float) * 100) }}%</div>
                            <div class="odds-label">Yes</div>
                        </div>
                        <div class="odds-box">
                            <div class="odds-value no">{{ "%.0f"|format((market.no_odds|float) * 100) }}%</div>
                            <div class="odds-label">No</div>
                        </div>
                    </div>
                    <div class="market-meta">
                        <span>Vol: ${{ "{:,.0f}".format(market.volume|float) }}</span>
                        <span>Ends: {{ market.end_date }}</span>
                    </div>
                </div>
                {% else %}
                <div class="empty-state" style="grid-column: 1/-1;">
                    <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></div>
                    <div>Loading markets...</div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Multi-Agent Swarm -->
        <section class="agents-section">
            <div class="section-header">
                <div class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-cyan)" stroke-width="2"><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="3"/><path d="M12 8v3"/><circle cx="7" cy="16" r="1.5" fill="var(--accent-cyan)"/><circle cx="17" cy="16" r="1.5" fill="var(--accent-cyan)"/></svg>
                    Agent Swarm
                </div>
                <span class="section-badge">Multi-Agent Architecture</span>
            </div>
            <div class="agents-grid">
                <div class="agent-card active">
                    <div class="agent-header">
                        <div class="agent-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg></div>
                        <div class="agent-status status-active">ACTIVE</div>
                    </div>
                    <div class="agent-name">Market Analysis Agent</div>
                    <div class="agent-desc">3-model consensus analysis using GPT, Gemini, and Claude for market predictions</div>
                    <div class="agent-stats">
                        <div class="agent-stat">
                            <span class="stat-value" id="agent-markets-analyzed">0</span>
                            <span class="stat-label">Markets Analyzed</span>
                        </div>
                        <div class="agent-stat">
                            <span class="stat-value" id="agent-accuracy">--</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                    </div>
                </div>
                <div class="agent-card coming-soon">
                    <div class="agent-header">
                        <div class="agent-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-purple)" stroke-width="2"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8z"/></svg></div>
                        <div class="agent-status status-soon">COMING SOON</div>
                    </div>
                    <div class="agent-name">News Agent</div>
                    <div class="agent-desc">Real-time news sentiment analysis for market-moving events</div>
                    <div class="agent-placeholder">
                        <div class="placeholder-bar"></div>
                        <div class="placeholder-bar short"></div>
                    </div>
                </div>
                <div class="agent-card coming-soon">
                    <div class="agent-header">
                        <div class="agent-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-purple)" stroke-width="2"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></div>
                        <div class="agent-status status-soon">COMING SOON</div>
                    </div>
                    <div class="agent-name">Edge Detection Agent</div>
                    <div class="agent-desc">Identifies arbitrage opportunities and market inefficiencies</div>
                    <div class="agent-placeholder">
                        <div class="placeholder-bar"></div>
                        <div class="placeholder-bar short"></div>
                    </div>
                </div>
                <div class="agent-card coming-soon">
                    <div class="agent-header">
                        <div class="agent-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-purple)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v12"/><path d="M15 9.5a3 3 0 0 0-3-3h-1a3 3 0 0 0 0 6h2a3 3 0 0 1 0 6h-1a3 3 0 0 1-3-3"/></svg></div>
                        <div class="agent-status status-soon">COMING SOON</div>
                    </div>
                    <div class="agent-name">Whale Tracker Agent</div>
                    <div class="agent-desc">Monitors smart money movements and large trader positions</div>
                    <div class="agent-placeholder">
                        <div class="placeholder-bar"></div>
                        <div class="placeholder-bar short"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- LLM Evaluation Panel -->
        <section class="evaluation-section">
            <div class="section-header">
                <div class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-cyan)" stroke-width="2"><path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2v-4M9 21H5a2 2 0 0 1-2-2v-4"/></svg>
                    LLM Evaluation
                </div>
                <button class="btn btn-ghost" onclick="runEvaluation()">Run Evaluation</button>
            </div>
            <div class="evaluation-panel">
                <div class="eval-description">
                    Our agent uses a <strong>3-model consensus</strong> system for robust predictions. Each model independently analyzes the market, and we only trade when 2+ models agree.
                </div>
                <div class="models-grid">
                    <div class="model-card">
                        <div class="model-header">
                            <div class="model-logo openai">GPT</div>
                            <div class="model-info">
                                <div class="model-name">GPT-4o-mini</div>
                                <div class="model-provider">OpenAI</div>
                            </div>
                        </div>
                        <div class="model-vote" id="gpt-vote">
                            <span class="vote-label">Waiting...</span>
                        </div>
                        <div class="model-bar">
                            <div class="model-bar-fill" id="gpt-bar" style="width: 0%"></div>
                        </div>
                        <div class="model-role">Fast Screening</div>
                    </div>
                    <div class="model-card">
                        <div class="model-header">
                            <div class="model-logo google">G</div>
                            <div class="model-info">
                                <div class="model-name">Gemini 2.5 Flash</div>
                                <div class="model-provider">Google</div>
                            </div>
                        </div>
                        <div class="model-vote" id="gemini-vote">
                            <span class="vote-label">Waiting...</span>
                        </div>
                        <div class="model-bar">
                            <div class="model-bar-fill" id="gemini-bar" style="width: 0%"></div>
                        </div>
                        <div class="model-role">Quick Analysis</div>
                    </div>
                    <div class="model-card">
                        <div class="model-header">
                            <div class="model-logo anthropic">C</div>
                            <div class="model-info">
                                <div class="model-name">Claude Haiku 4.5</div>
                                <div class="model-provider">Anthropic</div>
                            </div>
                        </div>
                        <div class="model-vote" id="claude-vote">
                            <span class="vote-label">Waiting...</span>
                        </div>
                        <div class="model-bar">
                            <div class="model-bar-fill" id="claude-bar" style="width: 0%"></div>
                        </div>
                        <div class="model-role">Deep Reasoning</div>
                    </div>
                </div>
                <div class="consensus-result" id="consensus-result">
                    <div class="consensus-label">Consensus</div>
                    <div class="consensus-value">Run analysis to see model votes</div>
                </div>
            </div>
        </section>

        <!-- Roadmap / Vision -->
        <section class="roadmap-section">
            <div class="section-header">
                <div class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-cyan)" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    Roadmap: Agent-to-Agent Economy
                </div>
            </div>
            <div class="roadmap-content">
                <div class="roadmap-intro">
                    The future of AI is <strong>agentic</strong> â€” autonomous systems that collaborate, trade services, and build on each other. With x402 micropayments, we're building the infrastructure for this future.
                </div>
                <div class="roadmap-grid">
                    <div class="roadmap-item completed">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
                        <div class="roadmap-title">Multi-Model Consensus</div>
                        <div class="roadmap-desc">3 LLMs vote on each prediction</div>
                    </div>
                    <div class="roadmap-item completed">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
                        <div class="roadmap-title">Autonomous Payments</div>
                        <div class="roadmap-desc">Agent pays for AI via x402</div>
                    </div>
                    <div class="roadmap-item in-progress">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-cyan)" stroke-width="2"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg></div>
                        <div class="roadmap-title">Agent Orchestration</div>
                        <div class="roadmap-desc">Multiple specialized agents working together</div>
                    </div>
                    <div class="roadmap-item future">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--text-tertiary)" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div>
                        <div class="roadmap-title">Agents Calling Agents</div>
                        <div class="roadmap-desc">Agents paying other agents for services via x402</div>
                    </div>
                    <div class="roadmap-item future">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--text-tertiary)" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div>
                        <div class="roadmap-title">Agent Marketplace</div>
                        <div class="roadmap-desc">Discover and hire specialized agents</div>
                    </div>
                    <div class="roadmap-item future">
                        <div class="roadmap-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--text-tertiary)" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div>
                        <div class="roadmap-title">Autonomous Economy</div>
                        <div class="roadmap-desc">Self-sustaining agent ecosystems</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; {{ current_year }} Polymarket AI Agent by <a href="https://blockrun.ai">BlockRun.AI</a></p>
        <p style="margin-top: 8px; font-size: 12px;">Data from Polymarket â€¢ Not financial advice â€¢ Trade at your own risk</p>
    </footer>

    <script>
        async function fetchAgentStatus() {
            try {
                const res = await fetch('/api/agent/status');
                const data = await res.json();

                const statusEl = document.getElementById('agent-status');
                const statusText = document.getElementById('agent-status-text');

                if (data.running) {
                    statusEl.textContent = 'RUNNING';
                    statusEl.className = 'status-badge success';
                    statusText.textContent = 'Running';
                    statusText.className = 'hero-stat-value small green';
                } else {
                    statusEl.textContent = 'STOPPED';
                    statusEl.className = 'status-badge error';
                    statusText.textContent = 'Stopped';
                    statusText.className = 'hero-stat-value small';
                }

                document.getElementById('last-run').textContent = 'Last run: ' + (data.last_run ? new Date(data.last_run).toLocaleString() : 'Never');
                document.getElementById('cycles').textContent = data.cycle_count || 0;
                document.getElementById('decisions-count').textContent = `${data.decisions_count || 0} decisions made`;

                document.getElementById('btn-start').disabled = data.running;
                document.getElementById('btn-stop').disabled = !data.running;
                document.getElementById('btn-run').disabled = data.running;

                const autoTradeEl = document.getElementById('auto-trade-status');
                const autoTradeBtn = document.getElementById('btn-auto-trade');

                if (data.auto_trade) {
                    autoTradeEl.textContent = 'ON';
                    autoTradeEl.className = 'hero-stat-value small green';
                    autoTradeBtn.textContent = 'Disable Auto-Trade';
                    autoTradeBtn.className = 'btn btn-danger';
                } else {
                    autoTradeEl.textContent = 'OFF';
                    autoTradeEl.className = 'hero-stat-value small red';
                    autoTradeBtn.textContent = 'Enable Auto-Trade';
                    autoTradeBtn.className = 'btn btn-primary';
                }

                if (data.error) {
                    document.getElementById('error-msg').style.display = 'block';
                    document.getElementById('error-msg').textContent = data.error;
                } else {
                    document.getElementById('error-msg').style.display = 'none';
                }
            } catch (e) { console.error(e); }
        }

        async function fetchWalletStatus() {
            try {
                const res = await fetch('/api/status');
                const data = await res.json();

                const addr = data.trading_wallet;
                document.getElementById('wallet-address').textContent = addr ? `${addr.slice(0, 8)}...${addr.slice(-6)}` : 'Not configured';

                const balance = data.usdc_balance || 0;
                const balanceEl = document.getElementById('usdc-balance');
                balanceEl.textContent = `$${balance.toFixed(2)}`;
                balanceEl.className = 'hero-stat-value ' + (balance > 0 ? 'cyan' : 'red');
            } catch (e) { console.error(e); }
        }

        async function fetchDecisions() {
            try {
                const res = await fetch('/api/agent/decisions');
                const data = await res.json();
                const container = document.getElementById('decisions-list');

                if (!data.decisions || data.decisions.length === 0) {
                    container.innerHTML = '<div class="empty-state"><div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></div><div>No decisions yet. Click "Run Once" to analyze markets.</div></div>';
                    return;
                }

                container.innerHTML = data.decisions.slice().reverse().slice(0, 15).map(d => {
                    const edge = d.edge ? (d.edge * 100).toFixed(1) : '?';
                    const edgeClass = parseFloat(edge) >= 0 ? 'positive' : 'negative';
                    const aiProb = d.ai_prob ? (d.ai_prob * 100).toFixed(0) : '?';
                    const marketProb = d.market_prob ? (d.market_prob * 100).toFixed(0) : '?';
                    const confidence = typeof d.confidence === 'number' ? d.confidence.toFixed(1) : '?';

                    let tradeHtml = '';
                    if (d.trade_result) {
                        const tr = d.trade_result;
                        if (tr.status === 'success') {
                            tradeHtml = `<div class="trade-result success">âœ“ TRADED $${(tr.size || 0).toFixed(2)}</div>`;
                        } else if (tr.status === 'skipped') {
                            tradeHtml = `<div class="trade-result skipped">â†’ ${tr.reason || 'Skipped'}</div>`;
                        } else {
                            tradeHtml = `<div class="trade-result error">âœ— ${tr.reason || 'Error'}</div>`;
                        }
                    } else if (d.action.includes('BET')) {
                        tradeHtml = `<div class="trade-result pending">Auto-trade OFF</div>`;
                    }

                    return `
                    <div class="decision-item">
                        <div class="decision-header">
                            <span class="decision-market">${d.market}</span>
                            <span class="decision-action ${d.action.includes('BET') ? 'buy' : 'pass'}">${d.action}</span>
                        </div>
                        <div class="decision-metrics">
                            <div class="metric"><span class="metric-value ${edgeClass}">${edge}%</span><span class="metric-label">Edge</span></div>
                            <div class="metric"><span class="metric-value neutral">${aiProb}%</span><span class="metric-label">AI Prob</span></div>
                            <div class="metric"><span class="metric-value">${marketProb}%</span><span class="metric-label">Market</span></div>
                            <div class="metric"><span class="metric-value">${confidence}</span><span class="metric-label">Conf</span></div>
                        </div>
                        ${tradeHtml}
                        <div class="decision-reasoning">${d.reasoning || ''}</div>
                        <div class="decision-time">${new Date(d.timestamp).toLocaleString()}</div>
                    </div>`;
                }).join('');
            } catch (e) { console.error(e); }
        }

        async function fetchTrades() {
            try {
                // Fetch both session trades and actual Polymarket positions
                const [tradesRes, positionsRes] = await Promise.all([
                    fetch('/api/agent/trades'),
                    fetch('/api/positions')
                ]);

                const tradesData = await tradesRes.json();
                const positionsData = await positionsRes.json();
                const container = document.getElementById('trades-list');

                const sessionTrades = tradesData.trades || [];
                const openOrders = positionsData.open_orders || [];
                const positions = positionsData.positions || [];
                const sessionOrders = positionsData.session_orders || [];

                // Combine all data for display
                let html = '';

                // Show session orders first (these we know we submitted)
                if (sessionOrders.length > 0) {
                    html += '<div style="padding: 12px 20px; background: rgba(255, 200, 0, 0.15); border-bottom: 1px solid var(--border-subtle);"><strong style="color: #FFC800;">â³ Recently Submitted Orders (This Session)</strong></div>';
                    sessionOrders.forEach(order => {
                        html += `
                        <div class="decision-item">
                            <div class="decision-header">
                                <span class="decision-market">${order.market || 'Unknown Market'}</span>
                                <span class="trade-result pending">SUBMITTED</span>
                            </div>
                            <div class="decision-metrics">
                                <div class="metric"><span class="metric-value neutral">${order.action}</span><span class="metric-label">Action</span></div>
                                <div class="metric"><span class="metric-value positive">$${order.size.toFixed(2)}</span><span class="metric-label">Size</span></div>
                            </div>
                            <div class="decision-reasoning" style="font-family: 'JetBrains Mono', monospace; font-size: 11px;">Order: ${order.order_id.slice(0, 40)}...</div>
                            <div class="decision-time">${order.timestamp ? new Date(order.timestamp).toLocaleString() : 'N/A'}</div>
                        </div>`;
                    });
                }

                // Show open orders from API
                if (openOrders.length > 0) {
                    html += '<div style="padding: 12px 20px; background: rgba(255, 136, 0, 0.1); border-bottom: 1px solid var(--border-subtle); margin-top: 16px;"><strong style="color: var(--accent-orange);">Open Orders from Polymarket API</strong></div>';
                    openOrders.forEach(order => {
                        html += `
                        <div class="decision-item">
                            <div class="decision-header">
                                <span class="decision-market">${order.market || 'Unknown Market'}</span>
                                <span class="trade-result pending">OPEN</span>
                            </div>
                            <div class="decision-metrics">
                                <div class="metric"><span class="metric-value neutral">${order.side}</span><span class="metric-label">Side</span></div>
                                <div class="metric"><span class="metric-value">${order.price.toFixed(2)}</span><span class="metric-label">Price</span></div>
                                <div class="metric"><span class="metric-value">${order.size.toFixed(2)}</span><span class="metric-label">Size</span></div>
                                <div class="metric"><span class="metric-value positive">$${order.value.toFixed(2)}</span><span class="metric-label">Value</span></div>
                            </div>
                            <div class="decision-time">Order ID: ${order.order_id?.slice(0, 20) || 'N/A'}...</div>
                        </div>`;
                    });
                }

                // Show filled positions
                if (positions.length > 0) {
                    html += '<div style="padding: 12px 20px; background: rgba(0, 255, 136, 0.1); border-bottom: 1px solid var(--border-subtle); margin-top: 16px;"><strong style="color: var(--accent-green);">Filled Positions</strong></div>';
                    positions.forEach(pos => {
                        html += `
                        <div class="decision-item">
                            <div class="decision-header">
                                <span class="decision-market">${pos.market || 'Unknown Market'}</span>
                                <span class="trade-result success">FILLED</span>
                            </div>
                            <div class="decision-metrics">
                                <div class="metric"><span class="metric-value neutral">${pos.size.toFixed(2)}</span><span class="metric-label">Shares</span></div>
                                <div class="metric"><span class="metric-value">${pos.avg_price.toFixed(3)}</span><span class="metric-label">Avg Price</span></div>
                                <div class="metric"><span class="metric-value positive">$${pos.value.toFixed(2)}</span><span class="metric-label">Cost Basis</span></div>
                            </div>
                            <div class="decision-time">Asset: ${pos.asset_id?.slice(0, 20) || 'N/A'}...</div>
                        </div>`;
                    });
                }

                // Show session trades (for context)
                if (sessionTrades.length > 0) {
                    html += '<div style="padding: 12px 20px; background: rgba(0, 240, 255, 0.1); border-bottom: 1px solid var(--border-subtle); margin-top: 16px;"><strong style="color: var(--accent-cyan);">Recent Session Activity</strong></div>';
                    sessionTrades.slice().reverse().slice(0, 10).forEach(t => {
                        // Map status to appropriate class and display
                        let statusClass, statusDisplay;
                        if (t.status === 'submitted') {
                            statusClass = 'pending';
                            statusDisplay = 'SUBMITTED';
                        } else if (t.status === 'success') {
                            statusClass = 'success';
                            statusDisplay = 'FILLED';
                        } else if (t.status === 'skipped') {
                            statusClass = 'skipped';
                            statusDisplay = 'SKIPPED';
                        } else {
                            statusClass = 'error';
                            statusDisplay = 'FAILED';
                        }

                        html += `
                        <div class="decision-item">
                            <div class="decision-header">
                                <span class="decision-market">${t.market || 'Unknown'}</span>
                                <span class="trade-result ${statusClass}">${statusDisplay}</span>
                            </div>
                            <div class="decision-metrics">
                                <div class="metric"><span class="metric-value neutral">${t.action || 'N/A'}</span><span class="metric-label">Action</span></div>
                                <div class="metric"><span class="metric-value positive">$${(t.size || 0).toFixed(2)}</span><span class="metric-label">Size</span></div>
                            </div>
                            ${t.order_id ? `<div class="decision-reasoning" style="font-family: 'JetBrains Mono', monospace; font-size: 11px;">Order: ${t.order_id.slice(0, 30)}...</div>` : ''}
                            ${t.message ? `<div class="decision-reasoning">${t.message}</div>` : ''}
                            <div class="decision-time">${t.timestamp ? new Date(t.timestamp).toLocaleString() : 'N/A'}</div>
                        </div>`;
                    });
                }

                if (html === '') {
                    container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ðŸ’°</div><div>No positions or orders found.</div></div>';
                } else {
                    container.innerHTML = html;
                }
            } catch (e) {
                console.error('Error fetching trades/positions:', e);
                document.getElementById('trades-list').innerHTML = '<div class="empty-state"><div class="empty-state-icon">âš ï¸</div><div>Error loading positions. Check console.</div></div>';
            }
        }

        async function refreshPositions() {
            fetchTrades();
        }

        async function fetchLogs() {
            try {
                const res = await fetch('/api/logs');
                const data = await res.json();
                const container = document.getElementById('logs-content');

                if (!data.logs || data.logs.length === 0) {
                    container.innerHTML = '<div class="log-line">No logs available.</div>';
                    return;
                }

                container.innerHTML = data.logs.map(line => {
                    let cls = 'log-line';
                    if (line.includes('ERROR')) cls += ' error';
                    else if (line.includes('WARNING')) cls += ' warning';
                    else if (line.includes('INFO')) cls += ' info';
                    return `<div class="${cls}">${line}</div>`;
                }).join('');
                container.scrollTop = container.scrollHeight;
            } catch (e) { console.error(e); }
        }

        async function startAgent() { await fetch('/api/agent/start', { method: 'POST', credentials: 'include' }); fetchAgentStatus(); }
        async function stopAgent() { await fetch('/api/agent/stop', { method: 'POST', credentials: 'include' }); fetchAgentStatus(); }

        async function runOnce() {
            const btn = document.getElementById('btn-run');
            btn.disabled = true;
            btn.textContent = 'âš¡ Running...';
            await fetch('/api/agent/run-once', { method: 'POST', credentials: 'include' });
            btn.textContent = 'âš¡ Run Once';
            btn.disabled = false;
            fetchAgentStatus();
            fetchDecisions();
            fetchTrades();
        }

        async function toggleAutoTrade() {
            const btn = document.getElementById('btn-auto-trade');
            btn.disabled = true;
            try {
                const res = await fetch('/api/agent/auto-trade', {
                    method: 'POST',
                    credentials: 'include',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                if (!res.ok) alert('Failed to toggle. Please refresh.');
                fetchAgentStatus();
                fetchTrades();
            } catch (e) { console.error(e); }
            btn.disabled = false;
        }

        async function clearLogs() {
            await fetch('/api/logs/clear', { method: 'POST', credentials: 'include' });
            fetchLogs();
        }

        async function runEvaluation() {
            const btn = document.querySelector('.evaluation-section .btn');
            btn.disabled = true;
            btn.textContent = 'ðŸ”¬ Running...';

            // Trigger a run once to get fresh data
            await fetch('/api/agent/run-once', { method: 'POST', credentials: 'include' });

            // Wait a bit for analysis to complete
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Fetch the latest decision to update the evaluation panel
            try {
                const res = await fetch('/api/agent/decisions');
                const data = await res.json();

                if (data.decisions && data.decisions.length > 0) {
                    updateEvaluationPanel(data.decisions[data.decisions.length - 1]);
                }
            } catch (e) { console.error(e); }

            btn.textContent = 'ðŸ”¬ Run Evaluation';
            btn.disabled = false;
        }

        function updateEvaluationPanel(decision) {
            if (!decision || !decision.reasoning) return;

            // Parse the reasoning to extract model votes
            const reasoning = decision.reasoning || '';
            const models = ['gpt-4o-mini', 'gemini-2.5-flash', 'claude-haiku'];
            const modelIds = ['gpt', 'gemini', 'claude'];

            // Update markets analyzed count
            const cyclesEl = document.getElementById('cycles');
            if (cyclesEl) {
                document.getElementById('agent-markets-analyzed').textContent = cyclesEl.textContent;
            }

            // Try to parse individual model probabilities from reasoning
            const probs = reasoning.match(/(\d+)%/g) || [];

            modelIds.forEach((id, i) => {
                const voteEl = document.getElementById(`${id}-vote`);
                const barEl = document.getElementById(`${id}-bar`);

                if (probs[i]) {
                    const prob = parseInt(probs[i]);
                    const isYes = prob > 50;
                    voteEl.innerHTML = `<span class="${isYes ? 'vote-yes' : 'vote-no'}">${isYes ? 'âœ“ YES' : 'âœ— NO'} ${prob}%</span>`;
                    barEl.style.width = `${prob}%`;
                } else {
                    voteEl.innerHTML = '<span class="vote-label">--</span>';
                    barEl.style.width = '0%';
                }
            });

            // Update consensus
            const consensusEl = document.getElementById('consensus-result');
            const consensus = decision.consensus || 'MIXED';
            const action = decision.action || 'SKIP';

            let consensusClass = 'mixed';
            if (consensus === 'BULLISH') consensusClass = 'bullish';
            else if (consensus === 'BEARISH') consensusClass = 'bearish';

            consensusEl.innerHTML = `
                <div class="consensus-label">Consensus</div>
                <div class="consensus-value ${consensusClass}">${consensus} - ${action}</div>
            `;
        }

        // Update evaluation panel when decisions are fetched
        const originalFetchDecisions = fetchDecisions;
        fetchDecisions = async function() {
            await originalFetchDecisions();
            try {
                const res = await fetch('/api/agent/decisions');
                const data = await res.json();
                if (data.decisions && data.decisions.length > 0) {
                    updateEvaluationPanel(data.decisions[data.decisions.length - 1]);
                }
            } catch (e) {}
        };

        fetchAgentStatus();
        fetchWalletStatus();
        fetchDecisions();
        fetchTrades();
        fetchLogs();

        setInterval(() => {
            fetchAgentStatus();
            fetchWalletStatus();
            fetchDecisions();
            fetchTrades();
            fetchLogs();
        }, 10000);
    </script>
</body>
</html>
